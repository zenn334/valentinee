<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Valentine ‚ù§Ô∏è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <div class="media-box">
            <video id="success-video" playsinline>
                <source src="assets/video.mp4" type="video/mp4">
            </video>
        </div>
        
        <div class="message-container" id="msg-box">
            <div class="typewriter-message" id="zen-message"></div>
        </div>
    </div>

    <audio id="bg-music">
        <source src="assets/song.mp3" type="audio/mpeg">
    </audio>

    <script>
        const video = document.getElementById('success-video');
        const music = document.getElementById('bg-music');
        const msgBox = document.getElementById('msg-box');
        const pesanZen = "Haloo Sayanggg, Zen bilang Zen bersyukurr bisa kenal sama kamuu. Kadang zen juga masih gk percaya, dari begitu banyak orang di dunia heheheh.\n\nZen bisa punya kesempatan untuk ngobrol sama kamuu, ketawa bareng, main bareng, dan ada beberapa momen yang bikin bahagia bangett hehehe. Mungkin kamu gk sadar, tapi semenjak ada kamu bikin hari hari nya Zen berubah jadi lebih hangat dan indah hehehhe.\n\nMakasih ya sayanggg sudah jadi diri kamu sendiri. Terimakasih udah hadir di hidupnya Zenn. Dan semoga di hari Valentine ini kamu dapat merasakan sayang bukan dari zenn aja yaa, tapi dari semua orang yang peduli dan sayang sama kamuu.\n\nHAPPY VALENTINE üòâ ‚ù§Ô∏è";

        function typeWriter(text, elementId) {
            let i = 0;
            const element = document.getElementById(elementId);
            function typing() {
                if (i < text.length) {
                    // Update innerHTML tanpa memicu pergerakan layar (scrollBy dihapus)
                    element.innerHTML = text.substring(0, i + 1).replace(/\n/g, "<br>") + '<span class="cursor"></span>';
                    i++;
                    setTimeout(typing, 45);
                }
            }
            typing();
        }

        window.onload = () => {
            // Pastikan video tidak mute agar suaranya terdengar
            video.muted = false;
            
            const playPromise = video.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Autoplay bersuara berhasil
                })
                .catch(error => {
                    // Jika diblokir browser, putar muted dulu sebagai fallback
                    video.muted = true;
                    video.play();
                });
            }

            // LOGIKA UTAMA: Saat video selesai
            video.onended = function() {
                // 1. Putar Lagu
                music.play();
                
                // 2. Munculkan Box Pesan
                msgBox.style.display = "block";
                
                // 3. Jalankan Typewriter
                typeWriter(pesanZen, "zen-message");
                
                // 4. Jalankan Hujan Hati
                startHearts();
            };
        };

        function startHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = Math.random() * 100 + "vw";
                heart.style.fontSize = (Math.random() * 20 + 10) + "px";
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 4000);
            }, 300);
        }
    </script>
</body>
</html>
